#!/usr/bin/env sh

echo "üìù Validando formato de conventional commits..."

# Validar el mensaje de commit usando commitlint
npx commitlint --edit $1

if [ $? -ne 0 ]; then
    echo "‚ùå El mensaje de commit no cumple con conventional commits."
    echo ""
    echo "Formato esperado: <type>(<scope>): <description>"
    echo ""
    echo "Tipos v√°lidos:"
    echo "  feat     - Nueva funcionalidad"
    echo "  fix      - Correcci√≥n de bug"
    echo "  docs     - Documentaci√≥n"
    echo "  style    - Cambios de formato (no afectan c√≥digo)"
    echo "  refactor - Refactorizaci√≥n de c√≥digo"
    echo "  test     - Agregar o corregir tests"
    echo "  chore    - Tareas de mantenimiento"
    echo "  perf     - Mejoras de rendimiento"
    echo "  ci       - Cambios en CI/CD"
    echo "  build    - Cambios en build system"
    echo "  revert   - Revertir commit anterior"
    echo ""
    echo "Ejemplos:"
    echo "  feat: add user authentication"
    echo "  fix(auth): resolve login issue"
    echo "  docs: update README"
    echo "  test: add unit tests for user service"
    exit 1
fi

echo "‚úÖ Mensaje de commit v√°lido." 